<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>æ‰‹å¯«æ•¸å­—è¾¨è­˜ - éŠ€æ²³ä¸»é¡Œç‰ˆ</title>

    <!-- TensorFlow.js -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.17.0/dist/tf.min.js"></script>

    <!-- ä¸»æ¨£å¼ -->
    <link rel="stylesheet" href="style.css">

    <!-- èˆ‡é¡é ­ / ç•«å¸ƒå±¤ç´šæœ‰é—œçš„å¿…è¦æ¨£å¼ï¼ˆä¸å‹•ä¸»é¡Œï¼‰ -->
    <style>
        #camera-feed {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none;
            z-index: 1;
        }

        canvas {
            position: relative;
            z-index: 2;
            background: rgba(0,0,0,1);
        }

        .cam-active canvas {
            background: rgba(0,0,0,0) !important;
        }

        .btn-camera {
            background: linear-gradient(135deg, #8e44ad 0%, #9b59b6 100%);
            box-shadow: 0 0 15px rgba(142, 68, 173, 0.7);
        }
    </style>
</head>

<body>
    <!-- æ˜Ÿç©ºèƒŒæ™¯ -->
    <div class="stars"></div>
    <div class="stars2"></div>
    <div class="stars3"></div>
    <div class="galaxy-bg"></div>

    <div class="galaxy-container">

        <!-- æ¨™é¡Œ -->
        <div class="title-container">
            <h1 class="galaxy-title">
                <span class="title-text">æ‰‹å¯«æ•¸å­—è¾¨è­˜ç³»çµ±</span>
                <span class="title-sub">(éŠ€æ²³ä¸»é¡Œç‰ˆ)</span>
            </h1>
            <div class="title-decoration">
                <div class="planet"></div>
                <div class="orbit"></div>
            </div>
        </div>

        <!-- ç•«å¸ƒ + é¡é ­ -->
        <div class="canvas-box" id="mainBox">
            <div class="canvas-frame">
                <div class="frame-glow"></div>

                <video
                    id="camera-feed"
                    autoplay
                    playsinline
                    muted
                ></video>

                <canvas
                    id="canvas"
                    width="700"
                    height="320"
                ></canvas>

                <div class="canvas-label">
                    æ‰‹å¯«è¾¨è­˜å€åŸŸï¼ˆä¿æŒé»‘è‰²èƒŒæ™¯ä»¥ç¢ºä¿è¾¨è­˜æº–ç¢ºï¼‰
                </div>
            </div>
        </div>

        <!-- æŒ‰éˆ•å€ -->
        <div class="btn-container">
            <button type="button" class="btn-run" onclick="predict()">
                <span class="btn-icon">ğŸš€</span> é–‹å§‹è¾¨è­˜
            </button>

            <button type="button" class="btn-clear" onclick="clearCanvas()">
                <span class="btn-icon">âœ¨</span> æ¸…é™¤ç•«å¸ƒ
            </button>

            <button
                type="button"
                id="eraserBtn"
                class="btn-eraser"
                onclick="toggleEraser()"
            >
                <span class="btn-icon">ğŸ§½</span> æ©¡çš®æ“¦ï¼šé—œé–‰
            </button>

            <button
                type="button"
                id="camToggleBtn"
                class="btn-camera"
                onclick="toggleCamera()"
            >
                <span class="btn-icon">ğŸ“·</span> é–‹å•Ÿé¡é ­
            </button>

            <button
                type="button"
                class="btn-upload"
                onclick="triggerFile()"
            >
                <span class="btn-icon">ğŸ›°ï¸</span> ä¸Šå‚³åœ–ç‰‡
            </button>

            <button
                type="button"
                id="voiceBtn"
                class="btn-voice"
                onclick="toggleVoice()"
            >
                <span class="btn-icon">ğŸŒŒ</span> èªéŸ³è¼¸å…¥ï¼šé—œé–‰
            </button>
        </div>

        <!-- éš±è—çš„æª”æ¡ˆ inputï¼ˆåªä¿ç•™ä¸€å€‹ï¼Œé¿å… double openï¼‰ -->
        <input
            type="file"
            id="fileInput"
            accept="image/*"
            style="display:none"
        >

        <!-- èªéŸ³ç‹€æ…‹ -->
        <div
            id="voice-status"
            style="display:none; margin-top:10px; color:#ff6b9d; font-weight:bold; text-shadow:0 0 10px #ff6b9d;"
        >
            <span class="pulse-icon">ğŸ™ï¸</span> æ­£åœ¨è†è½èªéŸ³æŒ‡ä»¤...
        </div>

        <!-- çµæœ -->
        <div id="result-area">
            <div class="result-title">
                <div class="result-icon">ğŸ”­</div>
                <h3>è¾¨è­˜çµæœ</h3>
            </div>

            <div id="digit-display">---</div>

            <div id="conf-details">
                è«‹æ‰‹å¯«æ•¸å­—ã€ä¸Šå‚³åœ–ç‰‡æˆ–é–‹å•ŸèªéŸ³å”¸å‡ºæ•¸å­—...
            </div>

            <div class="result-footer">
                <div class="signal">
                    <div class="signal-dot"></div>
                    <div class="signal-dot"></div>
                    <div class="signal-dot"></div>
                    <span>ç³»çµ±é‹ä½œä¸­</span>
                </div>
            </div>
        </div>

        <!-- é å°¾ -->
        <div class="galaxy-footer">
            <p>æ¢ç´¢æ•¸å­—çš„å®‡å®™ Â· éŠ€æ²³ä¸»é¡Œæ‰‹å¯«è¾¨è­˜ç³»çµ±</p>
        </div>
    </div>

    <!-- ä¸»ç¨‹å¼ -->
    <script src="script.js"></script>
</body>
</html>
